# PLess-SoC

**PLess-SoC** is a **processor-less System-on-Chip** fully generated through **[FlexSoC](https://github.com/EneaDim/flexsoc)**, an open-source framework for **digital IP development and SoC integration**, built on **OpenTitan primitives**, **Yosys**, and **OpenROAD Flow Scripts (ORFS)**.

You can find the RTL files and the whole flow scripts, results and reports **[here](https://github.com/EneaDim/flexsoc/tree/main/ips/tiny-soc)**.

---

## 🚀 Overview

**PLess-SoC** demonstrates a complete SoC architecture without a processor.  
All on-chip peripherals are controlled and monitored through **UART**, which acts as the external host interface.

### Integrated Peripherals
- **UART** — system host interface  
- **4x GPIO** — general-purpose I/O (4 bidirectional)  
- **1x PWM** — pulse-width modulation generators  
- **Timer** — RISC-V–style timer block  

All IPs are connected via a **TL-UL (TileLink Uncached Lightweight)** interconnect generated using **OpenTitan bus infrastructure**.

---

## 🧠 Architecture Concept

This SoC does **not** contain a CPU.  
Instead, the **UART** serves as the main control and communication bridge between the external host and the on-chip peripherals:

1. UART receives serialized commands and drives the TL-UL as a host.  
2. TL-UL interconnect routes read/write transactions to the correct IP.  
3. Peripheral CSRs execute the command or return the data.  

This makes it possible to configure, test, and monitor every peripheral directly over UART.

---

## ⚙️ System Configuration

- **System Clock:** 50 MHz  
- **Reset:** Active-low (`rst_n`)  
- **UART Baud Rate:** ~921,600 baud

> ⚠️ **Important:**  
> When updating the UART control register, always keep bits **[31:16] = `0x4B7F`**.  
> These define the baud-rate divider for 921.6 kbaud at 50 MHz.

---

## 🗺️ Memory Map

| Peripheral | Base Address |
|-------------|--------------|
| UART        | `0x8000_0000` |
| PWM         | `0x8002_0000` |
| GPIO        | `0x8004_0000` |
| TIMER       | `0x8006_0000` |

Each IP has a detailed CSR description under the **`ips_docs/`** folder, automatically generated by **FlexSoC**.

---

## 🔌 External Interface

- **UART RX/TX** — host communication for register access  
- **4x GPIO** — bidirectional I/O pins  
- **1x PWM outputs** — duty and period controlled via CSRs  
- **Clock input:** 50 MHz  
- **Reset input:** active-low asynchronous  
- **Enable signal (`ena`):** activates SoC outputs (safe state when low)

All communication and configuration occur through **UART**, enabling full SoC control from a PC or external controller.

---

## 🧩 About FlexSoC

**FlexSoC** is an open-source framework for designing digital IPs and integrating complete SoCs,
inspired by the methodologies and best practices of **OpenTitan** and **lowRISC** projects.
It automates everything from **IP creation to full SoC assembly** and **physical implementation**, combining:

- **OpenTitan TL-UL** interconnect and primitive components  
- **Yosys** for open-source synthesis  
- **OpenROAD Flow Scripts (ORFS)** for place & route and GDSII generation  

All stages are fully automated and open-source:

| Stage | Description |
|:------|:-------------|
| 📁 **HJSON Configuration Generation** | Automatic generation of IP/SoC configuration files in *hjson* format |
| 📄 **Documentation Generation** | Auto-generated documentation and register maps |
| 🧠 **CSR Generation** | Automatic CSR creation using *lowRISC regtool* with two interface options:<br> - **TL-UL interface** (OpenTitan-style)<br> - **Register interface** (PULP-style) |
| 🛠️ **RTL Stub & Wrapper Generation** | Automatic RTL module and wrapper generation from *hjson* definitions |
| 🔍 **RTL Linting & Formatting** | Built-in linting, style checking, and formatting |
| 🔬 **Functional Simulation** | Supports both **SystemVerilog Testbench** and **Cocotb** simulations |
| 🏗️ **Synthesis Trials (PPA)** | Open-source synthesis flow with area, timing, and power estimates |
| ⏱️ **Static Timing Analysis (STA)** | Automated STA using OpenROAD tools |
| 🧱 **Physical Implementation (RTL-to-GDS)** | Complete OpenROAD-based backend flow producing final **GDSII** |
| 🔌 **Power Estimation & Analysis** | Early-stage power evaluation integrated into the flow |
| 🌐 **IP Fetching & Dependency Management** | GitHub-based automatic IP retrieval and dependency handling |
| 🔀 **Interconnect Generation** | Automatic **XBAR** (crossbar) interconnect generation |
| 🧩 **SoC Integration** | Modular integration of IPs through **TL-UL** interfaces |

In short: **FlexSoC lets designers focus on IP functionality**, while it handles integration, tooling, and flow automation.

---

## 🧰 Toolchain Summary

| Stage | Tool / Framework | Description |
|-------|------------------|--------------|
| SoC Definition | **FlexSoC** | Open-source SoC and IP automation environment |
| Bus Infrastructure | **OpenTitan TL-UL** | Modular interconnect for peripheral integration |
| Synthesis | **Yosys** | Open-source logic synthesis |
| Physical Design | **OpenROAD Flow Scripts (ORFS)** | Automated PnR and GDSII generation |

---

## 🔬 Using the SoC

1. **Startup**
   - Apply 50 MHz clock and deassert reset.  
   - Open UART connection at **921,600 baud** (8N1).
   - To driver uart\_rx use ui\_in[0] pin.
   - To read data from the Soc use uart\_tx which is connected to uo\_out[0] pin.

2. **Control**
   - Write and read CSRs via UART to configure GPIOs, PWM, and Timer.  

3. **Example Operations**
   - Toggle GPIO pins by writing to output registers.  
   - Configure PWM frequency and duty cycle.  
   - Read timer registers to verify clock operation.

---

## 🧾 Summary

| Feature | Description |
|----------|-------------|
| **Architecture** | Processor-less SoC |
| **Host Interface** | UART |
| **Clock** | 50 MHz |
| **Baud Rate** | ~115,200 baud |
| **Bus Interconnect** | OpenTitan TL-UL |
| **Peripherals** | UART, 4x GPIO, 1x PWM, Timer |
| **Framework** | **FlexSoC (built on OpenTitan + Yosys + ORFS)** |
| **Flow** | Fully open-source RTL → GDS |

---

**Author:** [Enea Dimroci](https://github.com/EneaDim)  
